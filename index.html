<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Boda Ana & Carlos</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- CSS -->
    <link rel="stylesheet" href="styles.css?v=3.0-final">
</head>

<body>
    <script>
        if (!sessionStorage.getItem('cleaned_v3')) {
            // Keep cache cleaner logic
        }
    </script>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <div style="margin-top:10px; font-weight:500;">Procesando...</div>
    </div>



    <!-- Toast -->
    <div id="toastContainer"></div>

    <!-- HERO SECTION -->
    <div id="homeScreen" class="screen-layer">
        <div class="hero-section">
            <div class="hero-overlay"></div>



            <div class="hero-content">
                <div class="hero-subtitle">BIENVENIDOS A LA BODA DE</div>
                <h1 class="hero-title">Mar√≠a <span>&</span> Carlos</h1>

                <div class="hero-pills">
                    <div class="pill-badge">
                        üìÖ 29 Dic 2025
                    </div>
                    <div class="pill-badge">
                        üìç Hacienda San Jos√©
                    </div>
                </div>
            </div>
        </div>

        <!-- MAIN WRAPPER (Overlaps Hero) -->
        <div class="main-content">

            <!-- Welcome Card -->
            <div class="content-card" onclick="navigateTo('upload')">
                <div>
                    <div class="card-title">Subir Foto</div>
                    <div class="card-subtitle">Comparte tus recuerdos</div>
                </div>
                <div class="card-icon-circle" style="background: #E3F2FD; color: #2196F3;">
                    üì∏
                </div>
            </div>

            <!-- Gallery Card -->
            <div class="content-card" onclick="navigateTo('gallery')">
                <div>
                    <div class="card-title">Galer√≠a</div>
                    <div class="card-subtitle">Ver fotos de todos</div>
                </div>
                <div class="card-icon-circle" style="background: #E8F5E9; color: #4CAF50;">
                    üéâ
                </div>
            </div>

            <!-- Messages Card -->
            <div class="content-card" onclick="navigateTo('messages')">
                <div>
                    <div class="card-title">Mensajes</div>
                    <div class="card-subtitle">Firmar el muro</div>
                </div>
                <div class="card-icon-circle" style="background: #FFF3E0; color: #FF9800;">
                    üíå
                </div>
            </div>

            <div style="text-align: center; margin-top: 2rem; color: #999; font-size: 0.8rem;">
                Bienvenidos a nuestra celebraci√≥n
            </div>
        </div>
    </div>

    <!-- UPLOAD SCREEN -->
    <div id="uploadScreen" class="screen-layer hidden" style="background: white;">
        <button class="back-btn" onclick="navigateTo('home')">‚Üê</button>
        <div class="header-basic">
            <h2>Subir Foto</h2>
        </div>
        <div class="container">
            <div class="upload-area" id="dropZone"
                style="border: 2px dashed #ddd; padding: 3rem; text-align: center; border-radius: 12px; margin-bottom: 1rem;">
                <input type="file" id="fileInput" accept="image/*" hidden>
                <div onclick="document.getElementById('fileInput').click()">
                    <span style="font-size: 2rem;">‚òÅÔ∏è</span>
                    <p>Toca para elegir foto</p>
                </div>
            </div>
            <div id="previewArea" class="hidden"></div>
            <button id="uploadBtn" class="btn-primary hidden" onclick="handleUpload()">Publicar</button>
        </div>
    </div>

    <!-- GALLERY SCREEN -->
    <div id="galleryScreen" class="screen-layer hidden" style="background: white;">
        <button class="back-btn" onclick="navigateTo('home')">‚Üê</button>
        <div class="header-basic">
            <h2>Galer√≠a</h2>
        </div>
        <div class="container">
            <div id="galleryFilters" class="gallery-filters"
                style="display:flex; gap:10px; margin-bottom:1rem; overflow-x:auto;">
                <!-- JS will inject filters here -->
            </div>

            <div id="photoGrid" class="grid-photos">
                <!-- Javascript injects photos here -->
            </div>
        </div>
    </div>

    <!-- MESSAGES SCREEN -->
    <div id="messagesScreen" class="screen-layer hidden" style="background: white;">
        <button class="back-btn" onclick="navigateTo('home')">‚Üê</button>
        <div class="header-basic">
            <h2>Mensajes</h2>
        </div>
        <div class="container">
            <button class="btn-primary" style="margin-bottom: 2rem;" onclick="navigateTo('writeMessage')">
                ‚úçÔ∏è Nuevo Mensaje
            </button>
            <div id="messagesGrid"></div>
        </div>
    </div>

    <!-- WRITE MESSAGE SCREEN -->
    <div id="writeMessageScreen" class="screen-layer hidden" style="background: white;">
        <div class="header-basic">
            <button class="back-btn" onclick="navigateTo('messages')" style="left: 1rem;">‚Üê</button>
            <h2>Firmar</h2>
        </div>
        <div class="container">
            <form id="messageForm" onsubmit="handleMessageSubmit(event)">
                <input type="text" id="msgName" class="form-input" placeholder="Tu Nombre" required>
                <textarea id="msgText" class="form-textarea" placeholder="Escribe tu mensaje..." rows="4"
                    required></textarea>
                <input type="file" id="msgPhotoInput" hidden>
                <button type="submit" class="btn-primary">Enviar</button>
            </form>
        </div>
    </div>

    <!-- PHOTO MODAL -->
    <div id="photoModal" class="modal hidden" onclick="closePhotoModal()" style="display:none;">
        <!-- Keeps existing modal logic but hidden by default style -->
        <button class="close-modal"
            style="position:absolute; top:20px; right:20px; color:white; background:none; border:none; font-size:2rem;">√ó</button>
        <div class="modal-content" style="background:transparent; box-shadow:none;">
            <img id="modalImage" src="" style="width:100%; border-radius:8px;">
            <div class="modal-info" style="color:white; margin-top:10px;">
                <h3 id="modalName"></h3>
                <p id="modalCaption"></p>
            </div>
        </div>
    </div>

    <!-- BOTTOM NAV -->
    <nav class="bottom-nav">
        <a href="#" class="nav-item" onclick="navigateTo('home'); return false;">
            <span class="nav-icon">üè†</span>
            Inicio
        </a>
        <a href="#" class="nav-item" onclick="navigateTo('gallery'); return false;">
            <span class="nav-icon">üéâ</span>
            Galer√≠a
        </a>

        <!-- Center Action Button -->
        <div class="nav-item-center" onclick="navigateTo('upload')">
            <span class="nav-icon">üì∑</span>
        </div>

        <a href="#" class="nav-item" onclick="navigateTo('messages'); return false;">
            <span class="nav-icon">üíå</span>
            Muro
        </a>
        <a href="#" class="nav-item">
            <span class="nav-icon">üìç</span>
            Mapa
        </a>
    </nav>

    <script src="app.js?v=3.0-final"></script>
</body>

</html>