<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#1A0F2E">
    <meta name="color-scheme" content="dark">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="Boda - Comparte tus fotos y mensajes en tiempo real">
    <title>Boda de Fer & Mau</title>

    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://res.cloudinary.com">

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css?v=force_reload_05">

    <!-- Favicon -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üíç</text></svg>">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Nuestra Boda - Galer√≠a Compartida">
    <meta property="og:description" content="Comparte tus fotos y mensajes del evento">
    <meta property="og:type" content="website">
</head>

<body>
    <script>
        if (!sessionStorage.getItem('cleaned_v3')) {
            sessionStorage.setItem('cleaned_v3', 'true');
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistrations().then(regs => {
                    regs.forEach(r => r.unregister());
                    window.location.reload(true);
                });
            }
        }
    </script>
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <div class="loading-text">Subiendo...</div>
    </div>

    <!-- Toast Notification Container -->
    <div id="toastContainer"></div>

    <!-- Home Screen -->
    <div id="homeScreen" class="section">
        <div class="container">
            <header class="header">
                <div class="header-icon">üíç</div>
                <h1 id="coupleNames">Mar√≠a & Carlos</h1>

                <!-- Couple Photo -->
                <div class="couple-photo-container">
                    <img src="couple.png" alt="Mar√≠a & Carlos" class="couple-photo">
                </div>

                <div class="subtitle">Bienvenidos a nuestra boda</div>
                <div class="date" id="weddingDate">29 de Diciembre, 2025</div>
            </header>

            <div class="grid-2" style="grid-template-columns: 1fr;">
                <div class="card" onclick="navigateTo('upload')">
                    <h2 style="margin-bottom: 1rem; font-size: 1.8rem;">üì∏ Sube tu foto</h2>
                    <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                        Comparte los momentos especiales de este d√≠a inolvidable
                    </p>
                    <button class="btn btn-primary">
                        Subir Foto o Video
                    </button>
                </div>

                <div class="card" onclick="navigateTo('gallery')">
                    <h2 style="margin-bottom: 1rem; font-size: 1.8rem;">üéâ Ver fotos de todos</h2>
                    <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                        Explora la galer√≠a compartida del evento
                    </p>
                    <button class="btn btn-primary">
                        Ver Galer√≠a
                    </button>
                </div>

                <div class="card" onclick="navigateTo('messages')">
                    <h2 style="margin-bottom: 1rem; font-size: 1.8rem;">üíå Muro de mensajes</h2>
                    <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                        Lee los mensajes de amor y buenos deseos
                    </p>
                    <button class="btn btn-primary">
                        Ver Mensajes
                    </button>
                </div>
            </div>

            <div class="text-center mt-4">
                <p style="color: var(--text-muted); font-size: 0.9rem;">
                    ‚ù§Ô∏è Gracias por compartir este momento con nosotros
                </p>
            </div>
        </div>
    </div>

    <!-- Upload Screen -->
    <div id="uploadScreen" class="section hidden">
        <div class="container">
            <button onclick="navigateTo('home')" class="back-button">
                ‚Üê Volver
            </button>
            <header class="header">
                <h1>üì∏ Sube tu foto o video</h1>
                <div class="subtitle">Comparte los momentos especiales</div>
            </header>

            <form id="uploadForm" class="upload-form">
                <div class="form-group">
                    <label for="uploaderName">Tu nombre</label>
                    <input type="text" id="uploaderName" class="form-input" placeholder="¬øC√≥mo te llamas?" required>
                </div>

                <div class="form-group">
                    <label>Selecciona fotos o videos</label>
                    <div class="file-input-wrapper">
                        <input type="file" id="fileInput" accept="image/*,video/*" multiple>
                        <label for="fileInput" class="file-input-label">
                            <span style="font-size: 3rem;">üìÅ</span>
                            <div>
                                <div style="font-weight: 600; margin-bottom: 0.5rem;">
                                    Toca para seleccionar archivos
                                </div>
                                <div style="font-size: 0.9rem; color: var(--text-muted);">
                                    Fotos o videos desde tu c√°mara o galer√≠a
                                </div>
                            </div>
                        </label>
                    </div>
                    <div id="filePreview" class="file-preview"></div>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    ‚ú® Subir archivos
                </button>
            </form>
        </div>
    </div>

    <!-- Gallery Screen -->
    <div id="galleryScreen" class="section hidden">
        <div class="container">
            <button onclick="navigateTo('home')" class="back-button">
                ‚Üê Volver
            </button>
            <header class="header">
                <h1>üéâ Galer√≠a compartida</h1>
                <div class="subtitle">Todos los momentos del evento</div>
            </header>

            <!-- Filter Dropdowns -->
            <div id="galleryFilters" class="gallery-filters">
                <!-- Filters will be rendered here dynamically -->
            </div>

            <!-- Photo Grid -->
            <div id="photoGrid" class="grid-photos">
                <!-- Photos will be loaded here dynamically -->
                <div class="text-center" style="grid-column: 1/-1; padding: 3rem; color: var(--text-muted);">
                    <p style="font-size: 3rem; margin-bottom: 1rem;">üì∑</p>
                    <p>A√∫n no hay fotos. ¬°S√© el primero en compartir!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Gallery Screen -->
    <div id="galleryScreen" class="section hidden">
        <div class="container">
            <button onclick="navigateTo('home')" class="back-button">
                ‚Üê Volver
            </button>
            <header class="header">
                <h1>üéâ Galer√≠a compartida</h1>
                <div class="subtitle">Todos los momentos del evento</div>
            </header>

            <!-- Filter Dropdowns -->
            <div id="galleryFilters" class="gallery-filters">
                <!-- Filters will be rendered here dynamically -->
            </div>

            <!-- Photo Grid -->
            <div id="photoGrid" class="grid-photos">
                <!-- Photos will be loaded here dynamically -->
                <div class="text-center" style="grid-column: 1/-1; padding: 3rem; color: var(--text-muted);">
                    <p style="font-size: 3rem; margin-bottom: 1rem;">üì∑</p>
                    <p>A√∫n no hay fotos. ¬°S√© el primero en compartir!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Messages Screen -->
    <div id="messagesScreen" class="section hidden">
        <div class="container">
            <button onclick="navigateTo('home')" class="back-button">
                ‚Üê Volver
            </button>
            <header class="header">
                <h1>üíå Muro de mensajes</h1>
                <div class="subtitle">Recuerdos Inolvidables</div>
            </header>

            <!-- Write Message Button -->
            <div style="text-align: center; margin: 2rem 0;">
                <button onclick="navigateTo('writeMessage')" class="btn btn-primary"
                    style="padding: 1rem 2rem; font-size: 1.1rem;">
                    ‚úçÔ∏è Firmar muro
                </button>
            </div>

            <div id="messagesContainer">
                <!-- Messages will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Write Message Screen -->
    <div id="writeMessageScreen" class="section hidden">
        <div class="container">
            <button onclick="navigateTo('messages')" class="back-button">
                ‚Üê Volver
            </button>
            <header class="header">
                <h1>‚úçÔ∏è Firmar el muro</h1>
                <div class="subtitle">Comparte tus buenos deseos</div>
            </header>

            <form id="messageForm" class="upload-form">
                <div class="form-group">
                    <label for="messageName">Tu nombre</label>
                    <input type="text" id="messageName" class="form-input" placeholder="¬øC√≥mo te llamas?" required>
                </div>

                <div class="form-group">
                    <label for="messageText">Tu mensaje</label>
                    <textarea id="messageText" class="form-textarea"
                        placeholder="Escribe tus felicitaciones para los novios..." required
                        style="min-height: 150px;"></textarea>
                </div>

                <div class="form-group">
                    <label>Agregar foto (opcional)</label>
                    <div class="file-input-wrapper">
                        <input type="file" id="messageFileInput" accept="image/*,video/*">
                        <label for="messageFileInput" class="file-input-label">
                            <span style="font-size: 2rem;">üì∑</span>
                            <div style="font-size: 0.9rem;">
                                Agregar una foto o video (opcional)
                            </div>
                        </label>
                    </div>
                    <div id="messageFilePreview" class="file-preview"></div>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    üíå Enviar mensaje
                </button>
            </form>
        </div>
    </div>

    <!-- Photo Modal -->
    <div id="photoModal" class="modal hidden" onclick="closePhotoModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div>
                    <div class="modal-title" id="modalUploaderName"></div>
                    <div style="color: var(--text-muted); font-size: 0.9rem;" id="modalTimestamp"></div>
                </div>
                <button class="modal-close" onclick="closePhotoModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="modalMediaContainer"></div>
                <p id="modalCaption" style="margin-top: 1rem; color: var(--text-secondary);"></p>
            </div>
        </div>
    </div>

    <!-- Fixed Background for iOS -->
    <div class="fixed-background"></div>

    <!-- Bottom Navigation -->
    <nav class="fixed-bottom-nav">
        <div class="nav-container">
            <a href="#" class="nav-item active" onclick="navigateTo('home'); return false;">
                <span class="nav-icon">üè†</span>
                <span class="nav-label">Inicio</span>
            </a>
            <a href="#" class="nav-item" onclick="navigateTo('upload'); return false;">
                <span class="nav-icon">üì∏</span>
                <span class="nav-label">Subir</span>
            </a>
            <a href="#" class="nav-item" onclick="navigateTo('gallery'); return false;">
                <span class="nav-icon">üéâ</span>
                <span class="nav-label">Galer√≠a</span>
            </a>
            <a href="#" class="nav-item" onclick="navigateTo('messages'); return false;">
                <span class="nav-icon">üíå</span>
                <span class="nav-label">Mensajes</span>
            </a>
        </div>
    </nav>

    <!-- Main JavaScript -->
    <script src="app.js?v=force_reload_06"></script>
</body>